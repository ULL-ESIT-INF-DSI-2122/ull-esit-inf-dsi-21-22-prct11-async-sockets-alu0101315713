<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>p7</title><meta name="description" content="Documentation for p7"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">p7</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> p7</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#autor-felipe-g√≥mez-fuentes" id="autor-felipe-g√≥mez-fuentes" style="color: inherit; text-decoration: none;">
  <h1>Autor: Felipe G√≥mez Fuentes</h1>
</a>
<p><a href="https://github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct10-async-fs-process-alu0101315713/actions/workflows/coverall.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct10-async-fs-process-alu0101315713/actions/workflows/coverall.yml/badge.svg" alt="Coveralls"></a> <a href="https://github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct10-async-fs-process-alu0101315713/actions/workflows/node.js.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct10-async-fs-process-alu0101315713/actions/workflows/node.js.yml/badge.svg" alt="Test"></a> <a href="https://sonarcloud.io/summary/new_code?id=ULL-ESIT-INF-DSI-2122_ull-esit-inf-dsi-21-22-prct10-async-fs-process-alu0101315713"><img src="https://sonarcloud.io/api/project_badges/measure?project=ULL-ESIT-INF-DSI-2122_ull-esit-inf-dsi-21-22-prct10-async-fs-process-alu0101315713&metric=alert_status" alt="Quality Gate Status"></a></p>
<ul>
<li><a href="#autor-felipe-g%C3%B3mez-fuentes">Autor: Felipe G√≥mez Fuentes</a></li>
<li><a href="#0-github-pages">0. Github Pages</a></li>
<li><a href="#1-pr%C3%A1ctica-10---cliente-y-servidor-para-una-aplicaci%C3%B3n-de-procesamiento-de-notas-de-texto">1. Pr√°ctica 10 - Cliente y servidor para una aplicaci√≥n de procesamiento de notas de texto.</a></li>
<li><a href="#2-tareas-previas">2. Tareas Previas.</a></li>
<li><a href="#3-para-empezar">3. Para empezar.</a></li>
<li><a href="#4-aplicaci%C3%B3n">4. Aplicaci√≥n</a><ul>
<li><a href="#41---servidor">4.1 - Servidor</a></li>
</ul>
</li>
<li><a href="#42---manejo-de-datos">4.2 - Manejo de datos</a></li>
<li><a href="#43---cliente">4.3 - Cliente</a></li>
<li><a href="#5-conclusiones">5. Conclusiones</a></li>
<li><a href="#6-bibliograf%C3%ADa">6. Bibliograf√≠a</a></li>
</ul>

<a href="#0-github-pages" id="0-github-pages" style="color: inherit; text-decoration: none;">
  <h1>0. Github Pages</h1>
</a>
<ul>
<li>Si desea verlo en Pages, consulte <a href="https://ull-esit-inf-dsi-2122.github.io/ull-esit-inf-dsi-21-22-prct11-async-sockets-alu0101315713/">aqu√≠</a>.</li>
</ul>

<a href="#1-pr√°ctica-10---cliente-y-servidor-para-una-aplicaci√≥n-de-procesamiento-de-notas-de-texto" id="1-pr√°ctica-10---cliente-y-servidor-para-una-aplicaci√≥n-de-procesamiento-de-notas-de-texto" style="color: inherit; text-decoration: none;">
  <h1>1. Pr√°ctica 10 - Cliente y servidor para una aplicaci√≥n de procesamiento de notas de texto.</h1>
</a>
<ul>
<li>En este <a href="https://github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct10-async-fs-process-alu0101315713">repositorio</a> donde har√© un resumen haciendo una descripci√≥n de todos los pasos para el procedimiento de esta pr√°ctica. La pr√°ctica consiste en hacer una serie de ejercicios siguiendo la <a href="https://ull-esit-inf-dsi-2122.github.io/typescript-theory/typescript-project-setup.html">estructura b√°sica de proyecto</a> que se vio en clase, incluyendo todos los dichos archivos en el directorio <a href="src/">src</a> que contiene las soluciones de los ejercicios.</li>
</ul>

<a href="#2-tareas-previas" id="2-tareas-previas" style="color: inherit; text-decoration: none;">
  <h1>2. Tareas Previas.</h1>
</a>
<ul>
<li>Para empezar es necesario realizar antes una serie de tareas previas que nos van a permitir tener las bases para poder configurar un entorno de trabajo adecuado de cara a la realizaci√≥n del informe, por ejemplo haber realizado la Pr√°ctica 1, que puede revisar <a href="https://ull-esit-inf-dsi-2122.github.io/ull-esit-inf-dsi-21-22-prct01-iaas-alu0101315713/">aqu√≠</a>, tener le√≠do y aprendido los conocimientos necesarios sobre <a href="https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax">Markdown</a>, <a href="https://jekyllrb.com/">Jekyll</a> y <a href="https://lab.github.com/githubtraining/github-pages">GitHub Pages</a>, adem√°s de la lectura de los tutoriales <a href="https://www.w3schools.com/js/js_string_methods.asp">sobre los m√©todos que puede utilizar con string</a> y sobre <a href="https://www.w3schools.com/js/js_regexp.asp">expresiones regulares en JavaScript</a>, los <a href="https://ull-esit-inf-dsi-2122.github.io/typescript-theory/typescript-arrays-tuples-enums.html">apuntes de Arrays, tuplas y enumerados</a>, los <a href="https://ull-esit-inf-dsi-2122.github.io/typescript-theory/typescript-objects-classes-interfaces.html">apuntes de Objetos, clases e interfaces</a> documentaci√≥n en <a href="https://typedoc.org/">Typedoc</a>, hacer pruebas unitarias con <a href="https://mochajs.org/">Mocha</a>, <a href="https://www.chaijs.com/">Chai</a>, <a href="https://coveralls.io/">Coveralls</a> para la correcta elaboraci√≥n del mismo, entender la <a href="https://nodejs.org/dist/latest-v18.x/docs/api/child_process.html#asynchronous-process-creation">API as√≠ncrona para cear procesos</a> y <a href="https://ull-esit-inf-dsi-2122.github.io/typescript-theory/typescript-solid.html">Principios SOLID</a> para escribir c√≥digo m√°s limpio. A continuaci√≥n se mostrar√° una tabla con las tareas previas realizadas (en mi caso):</li>
</ul>
<table>
<thead>
<tr>
<th>Tareas Previas Realizadas.</th>
</tr>
</thead>
<tbody><tr>
<td>- Aceptar la asignaci√≥n de GitHub Classroom asociada a esta pr√°ctica.</td>
</tr>
<tr>
<td>- Leer los recursos sobre Markdown, pues es el lenguaje para escribir las pr√°cticas.</td>
</tr>
<tr>
<td>- Leer los recursos sobre Jekyll, para transformar los ficheros de texto en sitios Web.</td>
</tr>
<tr>
<td>- Leer los recursos sobre GitHub Pages, por si se necesita alg√∫n curso para aprender.</td>
</tr>
<tr>
<td>- Leer los recursos sobre Strings, por si se necesita alg√∫n concepto para aprender.</td>
</tr>
<tr>
<td>- Leer los recursos sobre Arrays, tuplas y enumerados, por si se necesita alg√∫n concepto para aprender.</td>
</tr>
<tr>
<td>- Leer los recursos sobre Objetos, clases e interfaces, por si se necesita alg√∫n curso para aprender.</td>
</tr>
<tr>
<td>- Leer los recursos sobre TypeDoc, por si se necesita alg√∫n curso para aprender.</td>
</tr>
<tr>
<td>- Leer los recursos sobre Mocha, por si se necesita alg√∫n curso para aprender.</td>
</tr>
<tr>
<td>- Leer los recursos sobre Chai, por si se necesita alg√∫n curso para aprender.</td>
</tr>
<tr>
<td>- Leer los recursos sobre Coverall, por si se necesita alg√∫n curso para aprender.</td>
</tr>
<tr>
<td>- Leer los recursos sobre node, por si se necesita alg√∫n curso para aprender.</td>
</tr>
<tr>
<td>- Leer los recursos sobre el manejo de ficheros en node, por si se necesita alg√∫n curso para aprender.</td>
</tr>
<tr>
<td>- Leer los recursos sobre SOLID, por si se necesita alg√∫n curso para aprender.</td>
</tr>
<tr>
<td>- Leer los recursos sobre yargs, por si se necesita alg√∫n curso para aprender.</td>
</tr>
<tr>
<td>- Leer los recursos sobre chalk, por si se necesita alg√∫n curso para aprender.</td>
</tr>
</tbody></table>

<a href="#3-para-empezar" id="3-para-empezar" style="color: inherit; text-decoration: none;">
  <h1>3. Para empezar.</h1>
</a>
<ul>
<li>Los ejercicios deben de cumplir la <a href="https://ull-esit-inf-dsi-2122.github.io/typescript-theory/typescript-project-setup.html">estructura b√°sica de proyecto</a> mencionada anteriormente, e incluiremos los ejercicios en el directorio <a href="src/">./src</a> haciendo uso de la metodolog√≠a SOLID. Una vez instaladas las dependencias de Mocha, Chai, Coveralls, TypeDoc, node, yargs y chalk se deber√° de hacer la documentaci√≥n de TypeDoc en la carpeta <a href="docs/">./docs</a> y la metodolog√≠a TDD en la carpeta <a href="tests/">./tests</a>.</li>
</ul>

<a href="#4-aplicaci√≥n" id="4-aplicaci√≥n" style="color: inherit; text-decoration: none;">
  <h1>4. Aplicaci√≥n</h1>
</a>

<a href="#41---servidor" id="41---servidor" style="color: inherit; text-decoration: none;">
  <h2>4.1 - Servidor</h2>
</a>
<ul>
<li><p>El servidor crear√° un socket para establecer una conexi√≥n, en este caso se har√° uso del puerto 60300. Tengo 2 funciones:
Funci√≥n donde creo el servidor, inicio su puerto de enlace y recibo los datos del cliente:</p>
<pre><code class="language-ts"><span class="hl-0">start</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-0">createServer</span><span class="hl-1">({</span><span class="hl-2">allowHalfOpen:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1">}, (</span><span class="hl-2">connection</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">&#39;Un usuario se ha conectado.&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-2">datosCliente</span><span class="hl-1"> = </span><span class="hl-4">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-4">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">datosCliente</span><span class="hl-1"> += </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">();</span><br/><span class="hl-1">      </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-0">datosServidor</span><span class="hl-1">(</span><span class="hl-2">datosCliente</span><span class="hl-1">, </span><span class="hl-2">connection</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }).</span><span class="hl-0">listen</span><span class="hl-1">(</span><span class="hl-5">60300</span><span class="hl-1">, () </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">&#39;Servidor iniciado en el puerto 60300.&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">}</span>
</code></pre>
</li>
<li><p>Funci√≥n del manejo de los datos en s√≠:</p>
<pre><code class="language-ts"><span class="hl-6">/**</span><br/><span class="hl-6"> * Se mueve todo el manejo de datos</span><br/><span class="hl-6"> * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-2">datosCliente</span><span class="hl-6"> Datos del cliente</span><br/><span class="hl-6"> * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-2">connection</span><span class="hl-6"> Conexi√≥n del cliente</span><br/><span class="hl-6"> */</span><br/><span class="hl-0">datosServidor</span><span class="hl-1">(</span><span class="hl-2">datosCliente</span><span class="hl-1">: </span><span class="hl-2">string</span><span class="hl-1">, </span><span class="hl-2">connection</span><span class="hl-1">: </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-2">Socket</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">jsonclient</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">(</span><span class="hl-2">datosCliente</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-9">switch</span><span class="hl-1"> (</span><span class="hl-2">jsonclient</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">/**</span><br/><span class="hl-6">     * A√±ade una nota</span><br/><span class="hl-6">     */</span><br/><span class="hl-1">    </span><span class="hl-9">case</span><span class="hl-1"> </span><span class="hl-4">&#39;add&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-4">&#39;Se ha solicitado una nueva nota.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-2">addNote</span><span class="hl-1">.</span><span class="hl-0">addNoteCallback</span><span class="hl-1">(</span><span class="hl-4">`</span><span class="hl-3">${</span><span class="hl-2">jsonclient</span><span class="hl-10">.</span><span class="hl-2">user</span><span class="hl-3">}</span><span class="hl-4">`</span><span class="hl-1">, </span><span class="hl-4">`</span><span class="hl-3">${</span><span class="hl-2">jsonclient</span><span class="hl-10">.</span><span class="hl-2">title</span><span class="hl-3">}</span><span class="hl-4">`</span><span class="hl-1">, </span><span class="hl-4">`</span><span class="hl-3">${</span><span class="hl-2">jsonclient</span><span class="hl-10">.</span><span class="hl-2">body</span><span class="hl-3">}</span><span class="hl-4">`</span><span class="hl-1">, </span><span class="hl-4">`</span><span class="hl-3">${</span><span class="hl-2">jsonclient</span><span class="hl-10">.</span><span class="hl-2">color</span><span class="hl-3">}</span><span class="hl-4">`</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-2">correct</span><span class="hl-1">: </span><span class="hl-8">any</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-9">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">err</span><span class="hl-1">));</span><br/><span class="hl-1">        } </span><span class="hl-9">else</span><span class="hl-1"> </span><span class="hl-9">if</span><span class="hl-1"> (</span><span class="hl-2">correct</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">correct</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">end</span><span class="hl-1">();</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">      </span><span class="hl-9">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-6">/**</span><br/><span class="hl-6">       * Modifica una nota</span><br/><span class="hl-6">       */</span><br/><span class="hl-1">    </span><span class="hl-9">case</span><span class="hl-1"> </span><span class="hl-4">&#39;update&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-4">&#39;Se ha solicitado una actualizaci√≥n de nota.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-2">modifyNote</span><span class="hl-1">.</span><span class="hl-0">modifyNoteCallback</span><span class="hl-1">(</span><span class="hl-4">`</span><span class="hl-3">${</span><span class="hl-2">jsonclient</span><span class="hl-10">.</span><span class="hl-2">user</span><span class="hl-3">}</span><span class="hl-4">`</span><span class="hl-1">, </span><span class="hl-4">`</span><span class="hl-3">${</span><span class="hl-2">jsonclient</span><span class="hl-10">.</span><span class="hl-2">title</span><span class="hl-3">}</span><span class="hl-4">`</span><span class="hl-1">, </span><span class="hl-4">`</span><span class="hl-3">${</span><span class="hl-2">jsonclient</span><span class="hl-10">.</span><span class="hl-2">body</span><span class="hl-3">}</span><span class="hl-4">`</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">, </span><span class="hl-2">correct</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-9">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">err</span><span class="hl-1">));</span><br/><span class="hl-1">        } </span><span class="hl-9">else</span><span class="hl-1"> </span><span class="hl-9">if</span><span class="hl-1"> (</span><span class="hl-2">correct</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">correct</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">end</span><span class="hl-1">();</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">      </span><span class="hl-9">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-6">/**</span><br/><span class="hl-6">       * Elimina una nota</span><br/><span class="hl-6">       */</span><br/><span class="hl-1">    </span><span class="hl-9">case</span><span class="hl-1"> </span><span class="hl-4">&#39;remove&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-4">&#39;Se ha solicitado una eliminaci√≥n de nota.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-2">removeNote</span><span class="hl-1">.</span><span class="hl-0">removeNoteCallback</span><span class="hl-1">(</span><span class="hl-4">`</span><span class="hl-3">${</span><span class="hl-2">jsonclient</span><span class="hl-10">.</span><span class="hl-2">user</span><span class="hl-3">}</span><span class="hl-4">`</span><span class="hl-1">, </span><span class="hl-4">`</span><span class="hl-3">${</span><span class="hl-2">jsonclient</span><span class="hl-10">.</span><span class="hl-2">title</span><span class="hl-3">}</span><span class="hl-4">`</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">, </span><span class="hl-2">correct</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-9">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">err</span><span class="hl-1">));</span><br/><span class="hl-1">        } </span><span class="hl-9">else</span><span class="hl-1"> </span><span class="hl-9">if</span><span class="hl-1"> (</span><span class="hl-2">correct</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">correct</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">end</span><span class="hl-1">();</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">      </span><span class="hl-9">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-6">/**</span><br/><span class="hl-6">       * Lee una nota</span><br/><span class="hl-6">       */</span><br/><span class="hl-1">    </span><span class="hl-9">case</span><span class="hl-1"> </span><span class="hl-4">&#39;read&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-4">&#39;Se ha solicitado una lectura de nota.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-2">readNote</span><span class="hl-1">.</span><span class="hl-0">readNoteCallback</span><span class="hl-1">(</span><span class="hl-4">`</span><span class="hl-3">${</span><span class="hl-2">jsonclient</span><span class="hl-10">.</span><span class="hl-2">user</span><span class="hl-3">}</span><span class="hl-4">`</span><span class="hl-1">, </span><span class="hl-4">`</span><span class="hl-3">${</span><span class="hl-2">jsonclient</span><span class="hl-10">.</span><span class="hl-2">title</span><span class="hl-3">}</span><span class="hl-4">`</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-2">correct</span><span class="hl-1">: </span><span class="hl-8">any</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-9">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">err</span><span class="hl-1">));</span><br/><span class="hl-1">        } </span><span class="hl-9">else</span><span class="hl-1"> </span><span class="hl-9">if</span><span class="hl-1"> (</span><span class="hl-2">correct</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">correct</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">end</span><span class="hl-1">();</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">      </span><span class="hl-9">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-6">/**</span><br/><span class="hl-6">       * Lista las notas</span><br/><span class="hl-6">       */</span><br/><span class="hl-1">    </span><span class="hl-9">case</span><span class="hl-1"> </span><span class="hl-4">&#39;list&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-4">&#39;Se ha solicitado una lista de notas.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-2">listNotes</span><span class="hl-1">.</span><span class="hl-0">listNoteCallback</span><span class="hl-1">(</span><span class="hl-4">`</span><span class="hl-3">${</span><span class="hl-2">jsonclient</span><span class="hl-10">.</span><span class="hl-2">user</span><span class="hl-3">}</span><span class="hl-4">`</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-2">correct</span><span class="hl-1">: </span><span class="hl-8">any</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-9">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">err</span><span class="hl-1">));</span><br/><span class="hl-1">        } </span><span class="hl-9">else</span><span class="hl-1"> </span><span class="hl-9">if</span><span class="hl-1"> (</span><span class="hl-2">correct</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">correct</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">end</span><span class="hl-1">();</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">      </span><span class="hl-9">break</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><span class="hl-1">}</span>
</code></pre>
</li>
<li><p>Para el esta √∫ltima funci√≥n hago uso de un evento, que en mi caso lo llam√© MyEventEmitter:
```ts
import {EventEmitter} from &#39;events&#39;;
import {RequestType} from &#39;./type&#39;;
import * as net from &#39;net&#39;;
/**</p>
</li>
</ul>
<ul>
<li>EventEmitter para la comunicaci√≥n con el cliente</li>
</ul>
<p> */
export class MyEventEmitter extends EventEmitter {
  constructor(public connection: net.Socket) {
    super();
  }
  public writeData(message: RequestType) {
    this.connection.write(<code>${JSON.stringify(message)}</code>);</p>
<pre><code><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-2">wholeData</span><span class="hl-1"> = </span><span class="hl-4">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-4">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">dataChunk</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">wholeData</span><span class="hl-1"> += </span><span class="hl-2">dataChunk</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-0">emit</span><span class="hl-1">(</span><span class="hl-4">&#39;response&#39;</span><span class="hl-1">, </span><span class="hl-2">wholeData</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code></pre>
<p>  }
}</p>
<pre><code><span class="hl-1">- </span><span class="hl-2">De</span><span class="hl-1"> </span><span class="hl-2">esta</span><span class="hl-1"> </span><span class="hl-2">forma</span><span class="hl-1"> </span><span class="hl-2">es</span><span class="hl-1"> </span><span class="hl-2">posible</span><span class="hl-1"> </span><span class="hl-2">establecer</span><span class="hl-1"> </span><span class="hl-2">una</span><span class="hl-1"> </span><span class="hl-2">conexi√≥n</span><span class="hl-1"> </span><span class="hl-2">cliente</span><span class="hl-1">-</span><span class="hl-2">servidor</span><span class="hl-1"> </span><span class="hl-2">por</span><span class="hl-1"> </span><span class="hl-2">parte</span><span class="hl-1"> </span><span class="hl-2">del</span><span class="hl-1"> </span><span class="hl-2">servidor</span><span class="hl-1">.</span><br/><br/><span class="hl-1"># </span><span class="hl-5">4.2</span><span class="hl-1"> - </span><span class="hl-2">Manejo</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">datos</span><br/><span class="hl-1">- </span><span class="hl-2">Para</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">funcionen</span><span class="hl-1"> </span><span class="hl-2">los</span><span class="hl-1"> </span><span class="hl-2">comandos</span><span class="hl-1"> </span><span class="hl-2">decid√≠</span><span class="hl-1"> </span><span class="hl-2">crear</span><span class="hl-1"> </span><span class="hl-2">una</span><span class="hl-1"> </span><span class="hl-2">clase</span><span class="hl-1"> </span><span class="hl-2">por</span><span class="hl-1"> </span><span class="hl-2">cada</span><span class="hl-1"> </span><span class="hl-2">uno</span><span class="hl-1"> </span><span class="hl-2">y</span><span class="hl-1"> </span><span class="hl-2">meterla</span><span class="hl-1"> </span><span class="hl-2">por</span><span class="hl-1"> </span><span class="hl-2">ficheros</span><span class="hl-1"> </span><span class="hl-2">separados</span><span class="hl-1">. </span><span class="hl-2">De</span><span class="hl-1"> </span><span class="hl-2">manera</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">tuve</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">hacer</span><span class="hl-1"> </span><span class="hl-5">2</span><span class="hl-1"> </span><span class="hl-2">ficheros</span><span class="hl-1"> </span><span class="hl-2">por</span><span class="hl-1"> </span><span class="hl-2">opcion</span><span class="hl-1">, </span><span class="hl-2">una</span><span class="hl-1"> </span><span class="hl-2">con</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">yargs</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">le</span><span class="hl-1"> </span><span class="hl-2">pide</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">comando</span><span class="hl-1"> </span><span class="hl-2">por</span><span class="hl-1"> </span><span class="hl-2">pantalla</span><span class="hl-1"> </span><span class="hl-2">al</span><span class="hl-1"> </span><span class="hl-2">usuario</span><span class="hl-1">, </span><span class="hl-2">y</span><span class="hl-1"> </span><span class="hl-2">otra</span><span class="hl-1"> </span><span class="hl-2">con</span><span class="hl-1"> </span><span class="hl-2">la</span><span class="hl-1"> </span><span class="hl-2">funci√≥n</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">va</span><span class="hl-1"> </span><span class="hl-2">a</span><span class="hl-1"> </span><span class="hl-2">recibir</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">servidor</span><span class="hl-1"> </span><span class="hl-2">donde</span><span class="hl-1"> </span><span class="hl-2">tendr√°</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">ejecutar</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">comando</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">dicho</span><span class="hl-1"> </span><span class="hl-2">cliente</span><span class="hl-1"> </span><span class="hl-2">le</span><span class="hl-1"> </span><span class="hl-2">mande</span><span class="hl-1"> </span><span class="hl-2">para</span><span class="hl-1"> </span><span class="hl-2">enviarle</span><span class="hl-1"> </span><span class="hl-2">la</span><span class="hl-1"> </span><span class="hl-2">respuesta</span><span class="hl-1"> </span><span class="hl-2">al</span><span class="hl-1"> </span><span class="hl-2">cliente</span><span class="hl-1">.</span><br/><span class="hl-1">- </span><span class="hl-2">Para</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">tema</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">las</span><span class="hl-1"> </span><span class="hl-2">opciones</span><span class="hl-1"> </span><span class="hl-2">hice</span><span class="hl-1"> </span><span class="hl-2">algo</span><span class="hl-1"> </span><span class="hl-2">as√≠</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> [</span><span class="hl-2">opciones</span><span class="hl-1">](</span><span class="hl-2">src</span><span class="hl-1">/</span><span class="hl-2">app</span><span class="hl-1">/</span><span class="hl-2">opciones</span><span class="hl-1">/):</span>
</code></pre>
<p>üì¶src
 ‚î£ üìÇapp
 ‚îÉ ‚î£ üìÇopciones
 ‚îÉ ‚îÉ ‚î£ üìúaddnote.ts
 ‚îÉ ‚îÉ ‚î£ üìúadduser.ts
 ‚îÉ ‚îÉ ‚î£ üìúlistnote.ts
 ‚îÉ ‚îÉ ‚î£ üìúmodifynote.ts
 ‚îÉ ‚îÉ ‚î£ üìúreadnote.ts
     ‚îó üìúremovenote.ts</p>
<pre><code><br/><span class="hl-1">- </span><span class="hl-2">Donde</span><span class="hl-1">, </span><span class="hl-2">dependiendo</span><span class="hl-1"> </span><span class="hl-2">del</span><span class="hl-1"> </span><span class="hl-2">comando</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">le</span><span class="hl-1"> </span><span class="hl-2">proporcione</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">cliente</span><span class="hl-1">, </span><span class="hl-2">acceder√°</span><span class="hl-1"> </span><span class="hl-2">a</span><span class="hl-1"> </span><span class="hl-2">un</span><span class="hl-1"> </span><span class="hl-2">fichero</span><span class="hl-1"> </span><span class="hl-2">u</span><span class="hl-1"> </span><span class="hl-2">otro</span><span class="hl-1"> </span><span class="hl-2">del</span><span class="hl-1"> </span><span class="hl-0">servidor</span><span class="hl-1"> (</span><span class="hl-2">visto</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">switch</span><span class="hl-1"> </span><span class="hl-2">anterior</span><span class="hl-1">) </span><span class="hl-2">y</span><span class="hl-1"> </span><span class="hl-2">ejecutar√°</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">comando</span><span class="hl-1"> </span><span class="hl-2">para</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">un</span><span class="hl-1"> </span><span class="hl-2">resultado</span><span class="hl-1">. </span><span class="hl-2">Ese</span><span class="hl-1"> </span><span class="hl-2">resultado</span><span class="hl-1"> </span><span class="hl-2">se</span><span class="hl-1"> </span><span class="hl-2">lo</span><span class="hl-1"> </span><span class="hl-2">enviar√°</span><span class="hl-1"> </span><span class="hl-2">al</span><span class="hl-1"> </span><span class="hl-2">cliente</span><span class="hl-1">.</span><br/><br/><span class="hl-1">- </span><span class="hl-2">La</span><span class="hl-1"> </span><span class="hl-2">parte</span><span class="hl-1"> </span><span class="hl-2">donde</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">cliente</span><span class="hl-1"> </span><span class="hl-2">escribe</span><span class="hl-1"> </span><span class="hl-2">los</span><span class="hl-1"> </span><span class="hl-2">comandos</span><span class="hl-1"> </span><span class="hl-2">est√°</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">directorio</span><span class="hl-1"> [</span><span class="hl-2">comandos</span><span class="hl-1">](</span><span class="hl-2">src</span><span class="hl-1">/</span><span class="hl-2">app</span><span class="hl-1">/</span><span class="hl-2">comandos</span><span class="hl-1">/). </span><span class="hl-2">Donde</span><span class="hl-1"> </span><span class="hl-2">cada</span><span class="hl-1"> </span><span class="hl-2">comando</span><span class="hl-1"> </span><span class="hl-2">se</span><span class="hl-1"> </span><span class="hl-2">encuentra</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> </span><span class="hl-2">una</span><span class="hl-1"> </span><span class="hl-2">clase</span><span class="hl-1"> </span><span class="hl-2">y</span><span class="hl-1"> </span><span class="hl-2">archivo</span><span class="hl-1"> </span><span class="hl-2">diferente</span><span class="hl-1">. </span><span class="hl-2">Son</span><span class="hl-1"> </span><span class="hl-2">comandos</span><span class="hl-1"> </span><span class="hl-2">bastante</span><span class="hl-1"> </span><span class="hl-2">parecidos</span><span class="hl-1"> </span><span class="hl-2">a</span><span class="hl-1"> </span><span class="hl-2">la</span><span class="hl-1"> [</span><span class="hl-2">pr√°ctica</span><span class="hl-1"> </span><span class="hl-5">9</span><span class="hl-1">](</span><span class="hl-2">https</span><span class="hl-1">:</span><span class="hl-6">//github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-alu0101315713), donde hago uso de comandos para a√±adir, modificar, eliminar notas y usuarios, y la [pr√°ctica 10](https://github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct10-async-fs-process-alu0101315713.git), donde hago comandos para leer, actualizar y crear directorios y ficheros.</span><br/><span class="hl-1">- </span><span class="hl-2">La</span><span class="hl-1"> </span><span class="hl-2">mayor</span><span class="hl-1"> </span><span class="hl-2">diferencia</span><span class="hl-1"> </span><span class="hl-2">respecto</span><span class="hl-1"> </span><span class="hl-2">a</span><span class="hl-1"> </span><span class="hl-2">las</span><span class="hl-1"> </span><span class="hl-2">otras</span><span class="hl-1"> </span><span class="hl-2">pr√°cticas</span><span class="hl-1"> </span><span class="hl-2">fue</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">ahora</span><span class="hl-1"> </span><span class="hl-2">solo</span><span class="hl-1"> </span><span class="hl-2">hay</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">enviar</span><span class="hl-1"> </span><span class="hl-2">request</span><span class="hl-1"> </span><span class="hl-2">al</span><span class="hl-1"> </span><span class="hl-2">servidor</span><span class="hl-1">. </span><span class="hl-2">Por</span><span class="hl-1"> </span><span class="hl-2">ejemplo</span><span class="hl-1">:</span><br/><span class="hl-1">- </span><span class="hl-4">``</span><span class="hl-0">handler</span><span class="hl-4">``</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">la</span><span class="hl-1"> </span><span class="hl-2">funci√≥n</span><span class="hl-1"> </span><span class="hl-4">`ADDNote`</span><span class="hl-1">:</span><br/><span class="hl-4">```ts</span><br/><span class="hl-4">handler(argv) {</span><br/><span class="hl-4">        request = {</span><br/><span class="hl-4">          type: &#39;add&#39;,</span><br/><span class="hl-4">          user: `</span><span class="hl-2">$</span><span class="hl-1">{argv.</span><span class="hl-2">user</span><span class="hl-1">}</span><span class="hl-4">`,</span><br/><span class="hl-4">          title: `</span><span class="hl-2">$</span><span class="hl-1">{argv.</span><span class="hl-2">title</span><span class="hl-1">}</span><span class="hl-4">`,</span><br/><span class="hl-4">          body: `</span><span class="hl-2">$</span><span class="hl-1">{argv.</span><span class="hl-2">body</span><span class="hl-1">}</span><span class="hl-4">`,</span><br/><span class="hl-4">          color: `</span><span class="hl-2">$</span><span class="hl-1">{argv.</span><span class="hl-2">color</span><span class="hl-1">}</span><span class="hl-4">`};</span><br/><br/><span class="hl-4">        const client = new Client(request);</span><br/><span class="hl-4">        client.client();</span><br/><span class="hl-4">      },</span>
</code></pre>
<ul>
<li><code>handler</code> de la funci√≥n <code>ADDUser</code>:
```ts
handler(argv) {
  request = {
    type: &#39;userAdd&#39;,
    user: <code>${argv.user}</code>};

  const client = new Client(request);
  client.client();
},</li>
</ul>
<pre><code><span class="hl-1">- </span><span class="hl-2">Como</span><span class="hl-1"> </span><span class="hl-2">podemos</span><span class="hl-1"> </span><span class="hl-2">apreciar</span><span class="hl-1">, </span><span class="hl-2">los</span><span class="hl-1"> </span><span class="hl-2">comandos</span><span class="hl-1"> </span><span class="hl-2">van</span><span class="hl-1"> </span><span class="hl-2">a</span><span class="hl-1"> </span><span class="hl-2">ser</span><span class="hl-1"> </span><span class="hl-2">bastantes</span><span class="hl-1"> </span><span class="hl-2">similares</span><span class="hl-1">, </span><span class="hl-2">y</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> </span><span class="hl-2">todos</span><span class="hl-1"> </span><span class="hl-2">los</span><span class="hl-1"> </span><span class="hl-2">comandos</span><span class="hl-1"> </span><span class="hl-2">al</span><span class="hl-1"> </span><span class="hl-2">final</span><span class="hl-1"> </span><span class="hl-2">llamamos</span><span class="hl-1"> </span><span class="hl-2">al</span><span class="hl-1"> </span><span class="hl-2">cliente</span><span class="hl-1"> </span><span class="hl-2">para</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">introduzca</span><span class="hl-1"> </span><span class="hl-2">por</span><span class="hl-1"> </span><span class="hl-2">pantalla</span><span class="hl-1"> </span><span class="hl-2">los</span><span class="hl-1"> </span><span class="hl-2">argumentos</span><span class="hl-1">. </span><span class="hl-2">El</span><span class="hl-1"> </span><span class="hl-2">resto</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">comandos</span><span class="hl-1"> </span><span class="hl-2">del</span><span class="hl-1"> </span><span class="hl-2">directorio</span><span class="hl-1"> [</span><span class="hl-2">comandos</span><span class="hl-1">](</span><span class="hl-2">src</span><span class="hl-1">/</span><span class="hl-2">app</span><span class="hl-1">/</span><span class="hl-2">comandos</span><span class="hl-1">/) </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">tengan</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> </span><span class="hl-2">su</span><span class="hl-1"> </span><span class="hl-2">nombre</span><span class="hl-1"> </span><span class="hl-4">`command`</span><span class="hl-1"> </span><span class="hl-2">son</span><span class="hl-1"> </span><span class="hl-2">comandos</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">la</span><span class="hl-1"> </span><span class="hl-2">pr√°ctica</span><span class="hl-1"> </span><span class="hl-2">anterior</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">no</span><span class="hl-1"> </span><span class="hl-2">se</span><span class="hl-1"> </span><span class="hl-2">piden</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> </span><span class="hl-2">esta</span><span class="hl-1"> </span><span class="hl-2">pr√°ctica</span><span class="hl-1"> </span><span class="hl-2">pero</span><span class="hl-1"> </span><span class="hl-2">deja</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">c√≥digo</span><span class="hl-1"> </span><span class="hl-2">m√°s</span><span class="hl-1"> </span><span class="hl-2">utilizable</span><span class="hl-1">.</span><br/><span class="hl-1"># </span><span class="hl-5">4.3</span><span class="hl-1"> - </span><span class="hl-2">Cliente</span><br/><span class="hl-1">- </span><span class="hl-2">Para</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">tema</span><span class="hl-1"> </span><span class="hl-2">del</span><span class="hl-1"> </span><span class="hl-2">cliente</span><span class="hl-1">, </span><span class="hl-2">como</span><span class="hl-1"> </span><span class="hl-2">se</span><span class="hl-1"> </span><span class="hl-2">ha</span><span class="hl-1"> </span><span class="hl-2">explicado</span><span class="hl-1"> </span><span class="hl-2">antes</span><span class="hl-1">, </span><span class="hl-2">hay</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">pedirle</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">escriba</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">comando</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">quiera</span><span class="hl-1"> </span><span class="hl-2">ejecutar</span><span class="hl-1">, </span><span class="hl-2">para</span><span class="hl-1"> </span><span class="hl-2">ello</span><span class="hl-1"> </span><span class="hl-2">primero</span><span class="hl-1"> </span><span class="hl-2">debe</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">poder</span><span class="hl-1"> </span><span class="hl-2">conectarse</span><span class="hl-1"> </span><span class="hl-2">al</span><span class="hl-1"> </span><span class="hl-2">puerto</span><span class="hl-1">, </span><span class="hl-2">as√≠</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">lo</span><span class="hl-1"> </span><span class="hl-2">uniremos</span><span class="hl-1"> </span><span class="hl-2">con</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">socket</span><span class="hl-1">.</span><br/><span class="hl-4">```ts</span><br/><span class="hl-4">  client() {</span><br/><span class="hl-4">    const json: any = this.request;</span><br/><br/><span class="hl-4">    const myEventEmitter = new MyEventEmitter(net.connect({port: 60300}));</span><br/><span class="hl-4">    myEventEmitter.writeData(json);</span><br/><br/><span class="hl-4">    myEventEmitter.on(&#39;response&#39;, (data) =&gt; {</span><br/><span class="hl-4">      console.log(this.display(data));</span><br/><span class="hl-4">    });</span>
</code></pre>
<ul>
<li><p>Una vez conectado, hice un display del resultado que tendr√° el usuario una vez se ejecute correctamente. Este display tiene 2 switches, uno para el caso de que se ejecute correctamente y otro cuando no.</p>
</li>
<li><p>Por √∫ltimo, hice un directorio <a href="src/app/app.ts">app</a> donde se ejecuta el cliente y contiene todas las opciones y todos los comandos:</p>
<ul>
<li>Importaciones:
```ts
import * as yargs from &#39;yargs&#39;;
import {LScommand} from &#39;./comandos/lscommand&#39;;
import {MKDIRcommand} from &#39;./comandos/mkdircommand&#39;;
import {LSFILEScommand} from &#39;./comandos/lsfilescommand&#39;;
import {CATcommand} from &#39;./comandos/catcommand&#39;;
import {RMcommand} from &#39;./comandos/rmcommand&#39;;
import {MVcommand} from &#39;./comandos/mvcommand&#39;;
import {CPcommand} from &#39;./comandos/cpcommand&#39;;</li>
</ul>
</li>
</ul>
<p>import {ADDNote} from &#39;./comandos/add_note&#39;;
import {ModifyNote} from &#39;./comandos/modify_note&#39;;
import {RemoveNote} from &#39;./comandos/remove_note&#39;;
import {ReadNote} from &#39;./comandos/read_note&#39;;
import {ListNotescommand} from &#39;./comandos/list_note&#39;;
import {ADDuser} from &#39;./comandos/add_user&#39;;</p>
<pre><code><span class="hl-1">  - </span><span class="hl-2">Exportaciones</span><br/><span class="hl-4">```ts</span><br/><span class="hl-4">export const ls = new LScommand();</span><br/><span class="hl-4">export const mkdir = new MKDIRcommand();</span><br/><span class="hl-4">export const lsfiles = new LSFILEScommand();</span><br/><span class="hl-4">export const cat = new CATcommand();</span><br/><span class="hl-4">export const rm = new RMcommand();</span><br/><span class="hl-4">export const mv = new MVcommand();</span><br/><span class="hl-4">export const cp = new CPcommand();</span><br/><br/><span class="hl-4">export const addNote = new ADDNote();</span><br/><span class="hl-4">export const addUser = new ADDuser();</span><br/><span class="hl-4">export const modifyNote = new ModifyNote();</span><br/><span class="hl-4">export const removeNote = new RemoveNote();</span><br/><span class="hl-4">export const readNote = new ReadNote();</span><br/><span class="hl-4">export const listNote = new ListNotescommand();</span>
</code></pre>
<ul>
<li>LLamadas a funciones:
```ts
ls.ls();
mkdir.mkdir();
lsfiles.lsfiles();
cat.cat();
rm.rm();
mv.mv();
cp.cp();</li>
</ul>
<p>addNote.addNote();
addUser.adduser();
modifyNote.modifyNote();
removeNote.removeNote();
readNote.readNote();
listNote.list();</p>
<p>yargs.parse();</p>
<p>```</p>
<ul>
<li>Como se puede observar, hay clases importadas y exportadas separadas, porque como se dijo con anterioridad, hay clases que ya ven√≠an hechas que no entraban en el enunciado, sino que son un plus, hechas ya de pr√°cticas anteriores, y las √∫ltimas son las que s√≠ se piden en el enunciado.</li>
</ul>

<a href="#5-conclusiones" id="5-conclusiones" style="color: inherit; text-decoration: none;">
  <h1>5. Conclusiones</h1>
</a>
<ul>
<li><p>Los ejercicios han servido como repaso sobre c√≥mo usar las funciones de las strings, el uso de los arrays, tuplas y los enumerados en TypeScript. Hay que tener en cuenta que, para las pruebas TDD, primero hay que tener bien instalado Mocha y Chai, y bien escrito el archivo <code>.mocharc.json</code>, que siguiendo este <a href="https://drive.google.com/file/d/1-z1oNOZP70WBDyhaaUijjHvFtqd6eAmJ/view">v√≠deo</a> tendr√≠a que quedar algo similar o igual a <a href="./.mocharc.json">esto</a>.</p>
</li>
<li><p>Para el caso de TypeDoc, es necesario, aparte de tener las dependencias instaladas, seguir este <a href="https://drive.google.com/file/d/19LLLCuWg7u0TjjKz9q8ZhOXgbrKtPUme/view">v√≠deo</a> como ayuda fundamental a tenerlo bien instalado.</p>
</li>
<li><p>Tambi√©n es interesante el uso de la herramienta Coverall que nos informa los archivos con c√≥digo fuente en Typescript que se han analizado y que se sacan del fichero <a href="./.mocharc.json">.mocharc.json</a>. Coverall nos indica el cubrimiento que le damos a las funciones, la l√≠neas que no est√°n cubiertas y cu√°nto % se cubre de las sentencias y las ramas. Para saber instalarlo una buena opci√≥n es ver este <a href="https://drive.google.com/file/d/1xLDc4CpoYpsAlCFO_4DMwu7MKCtcZDnh/view">v√≠deo</a>.</p>
</li>
<li><p>Otro factor bastante importante fue hacer uso de los <a href="https://ull-esit-inf-dsi-2122.github.io/typescript-theory/typescript-solid.html">Principios SOLID</a>, que fue clave para hacer clases espec√≠ficas pra m√©todos espec√≠ficos, estos principios se usaron en toda la pr√°ctica.</p>
</li>
<li><p>La librer√≠a fs ha sido bastante clave para poder manejar los ficheros de manera as√≠ncrona, como se ha explicado en los puntos anteriores.</p>
</li>
<li><p><strong>HAY FALLOS EN ALGUNOS COMANDOS.</strong> No se han podido terminar con √©xito algunos comandos, como por ejemplo, el <code>addUser</code> o el <code>read</code>, pero en cambio, algunos como el <code>list</code> s√≠ funcionan correctamente. El comando se pasa bien por parte del cliente, el servidor recibe de forma correcta el comando, pero hay condiciones que no se cumplen a la hora de devolver el resultado al cliente. Se ha intentado de varias formas y no se ha encontrado soluci√≥n.</p>
</li>
<li><p>Para poder hacer buen uso del SonarCloud, tuvo que ser necesario <strong>no usar</strong> la √∫ltima versi√≥n de node (18.0.0), sino que tuve que usar la versi√≥n <code>17.7.2</code>. De esta forma se pudo realizar tanto las pruebas de Coveralls como el scanner de SonarCloud correctamente.</p>
</li>
</ul>

<a href="#6-bibliograf√≠a" id="6-bibliograf√≠a" style="color: inherit; text-decoration: none;">
  <h1>6. Bibliograf√≠a</h1>
</a>
<ol>
<li><a href="https://ull-esit-inf-dsi-2122.github.io/prct11-async-sockets/">Enunciado Pr√°ctica 11</a></li>
<li><a href="https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax">Introducci√≥n a Markdown</a></li>
<li><a href="https://docs.github.com/en/pages">Recurso sobre GitHub Pages</a></li>
<li><a href="https://jekyllrb.com/">P√°gina web de Jekyll</a></li>
<li><a href="https://www.w3schools.com/js/js_string_methods.asp">Tutorial m√©todos con strings</a></li>
<li><a href="https://www.w3schools.com/js/js_regexp.asp">Tutorial expresiones regulares en JavaScript</a></li>
<li><a href="https://typedoc.org/">TypeDoc</a></li>
<li><a href="https://mochajs.org/">Mocha</a></li>
<li><a href="https://www.chaijs.com/">Chai</a></li>
<li><a href="https://eslint.org/">Eslint</a></li>
<li><a href="https://coveralls.io/">Coverall</a></li>
<li><a href="https://ull-esit-inf-dsi-2122.github.io/nodejs-theory/nodejs-intro.html">Apuntes de introducci√≥n a NodeJS</a></li>
<li><a href="https://ull-esit-inf-dsi-2122.github.io/nodejs-theory/nodejs-filesystem.html">Apuntes del sistema de ficheros en NodeJS</a></li>
<li><a href="https://ull-esit-inf-dsi-2122.github.io/typescript-theory/typescript-solid.html">Principios SOLID</a></li>
<li><a href="https://www.npmjs.com/package/yargs">yargs</a></li>
<li><a href="https://www.npmjs.com/package/chalk">chalk</a></li>
<li><a href="https://nodejs.org/dist/latest-v18.x/docs/api/child_process.html#asynchronous-process-creation">API as√≠ncrona de Node</a></li>
</ol>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/app.html">app</a></li><li class=" tsd-kind-module"><a href="modules/server.html">server</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>